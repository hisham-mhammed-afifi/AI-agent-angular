<!-- Chat Icon Button -->
<div
  class="chat-icon"
  (click)="isChatOpen = !isChatOpen; close.emit(!isChatOpen)"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    fill="#ffffff"
    height="40px"
    width="40px"
    version="1.1"
    id="Capa_1"
    viewBox="0 0 60.019 60.019"
    xml:space="preserve"
  >
    <g>
      <path
        d="M59.888,47.514l-3.839-11.518c2.056-3.615,3.14-7.716,3.14-11.893c0-13.286-10.809-24.095-24.095-24.095   c-8.242,0-15.824,4.223-20.219,11.007c3.089-1.291,6.477-2.007,10.029-2.007C39.294,9.01,51,20.716,51,35.104   c0,3.996-0.905,7.783-2.518,11.172l10.263,2.701c0.085,0.022,0.17,0.033,0.255,0.033c0.006,0,0.014-0.001,0.02,0   c0.553,0,1-0.448,1-1C60.019,47.829,59.972,47.66,59.888,47.514z"
      />
      <path
        d="M24.905,11.01C11.619,11.01,0.81,21.819,0.81,35.104c0,4.176,1.084,8.277,3.14,11.893L0.051,58.693   c-0.116,0.349-0.032,0.732,0.219,1C0.462,59.898,0.727,60.01,1,60.01c0.085,0,0.17-0.011,0.255-0.033l12.788-3.365   c3.35,1.694,7.097,2.587,10.862,2.587C38.191,59.199,49,48.39,49,35.104S38.191,11.01,24.905,11.01z M41.246,26.799   c-0.152,0.083-0.317,0.123-0.479,0.123c-0.354,0-0.696-0.188-0.878-0.519c-2.795-5.097-8.115-8.679-13.883-9.349   c-0.549-0.063-0.941-0.56-0.878-1.108c0.063-0.548,0.558-0.942,1.108-0.878c6.401,0.743,12.304,4.718,15.406,10.373   C41.908,25.926,41.73,26.534,41.246,26.799z"
      />
    </g>
  </svg>
</div>

<!-- Chat Popup -->
<div class="chat-popup" [class.show]="isChatOpen">
  <!-- Header -->
  <div class="chat-header">{{ configs().title }}</div>

  <!-- Body with Messages -->
  <div class="chat-body">
    @for (message of messages(); track $index) { @if(message.sender === 0) {

    <!-- Incoming message -->
    <div class="message incoming">
      {{ message.text }}
      <div class="message-time">
        {{ message.time | date : "h:mm a" }}
      </div>
    </div>
    }@else {

    <!-- Outgoing message -->
    <div class="message outgoing">
      {{ message.text }}
      <div class="message-time">
        {{ message.time | date : "h:mm a" }}
      </div>
    </div>
    } }
  </div>

  <!-- Footer with Input -->
  <div class="chat-footer">
    <input
      type="text"
      name="message"
      [(ngModel)]="message"
      placeholder="Type a message..."
      required
    />
    <button
      class="send-btn"
      type="submit"
      [disabled]="message() === ''"
      (click)="sendMessage()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20px"
        height="20px"
        viewBox="-0.5 0 25 25"
        fill="none"
      >
        <path
          d="M2.33045 8.38999C0.250452 11.82 9.42048 14.9 9.42048 14.9C9.42048 14.9 12.5005 24.07 15.9305 21.99C19.5705 19.77 23.9305 6.13 21.0505 3.27C18.1705 0.409998 4.55045 4.74999 2.33045 8.38999Z"
          stroke="#ffffff"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M15.1999 9.12L9.41992 14.9"
          stroke="#ffffff"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
  </div>
</div>
